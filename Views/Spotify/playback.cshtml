<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spotify Test Room</title>
    <script src="https://open.spotify.com/embed-podcast/iframe-api/v1" async></script>
    <style>
    body {
        font: 0.7rem sans-serif;
    }

    h1 {
        margin:  10px;
    }

    ul#episodes {
        float: left;
        margin:  0 10px;
        padding: 0;
        width: 35%;
    }

    ul#episodes > li {
        list-style-type: none;
    }

    button {
        border-radius:  7px;
        border: 0;
        background: #191414;
        color: #fff;
        padding:  10px;
        margin:  0 0 3px 0;
        width: 100%;
        cursor: pointer;
    }

    button:hover {
        background: #1Db954;
    }
</style>
</head>
<body>
    <iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/0S3tNyWxkxXlQFDyXGIbV0?utm_source=generator" width="100%" height="80" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>
        <h1>Pick an episode...</h1>
        <ul id="episodes">
        <li>
            <button data-spotify-id="spotify:track:0S3tNyWxkxXlQFDyXGIbV0">
            My Path to Spotify: Women in Engineering
            </button>
        </li>
        <li>
            <button data-spotify-id="spotify:track:7C4jbixOxdyewrUDgmib7D">
            What is Backstage?
            </button>
        </li>
        <li>
            <button data-spotify-id="spotify:episode:6I3ZzCxRhRkNqnQNo8AZPV">
            Introducing Nerd Out@Spotify
            </button>
        </li>
        </ul>

        <div id="embed-iframe"></div>
        <script src="https://open.spotify.com/embed-track/iframe-api/v1" async>
        </script>
        <script type="text/javascript">
        window.onSpotifyIframeApiReady = (IFrameAPI) => {
            let element = document.getElementById('embed-iframe');
            let options = {
                width: '60%',
                height: '200',
                uri: 'spotify:episode:7makk4oTQel546B0PZlDM5'
            };
            let callback = (EmbedController) => {
            document.querySelectorAll('ul#episodes > li > button').forEach(
                episode => {
                episode.addEventListener('click', () => {
                    EmbedController.loadUri(episode.dataset.spotifyId)
                });
                })
            };
            IFrameAPI.createController(element, options, callback);
        };
    </script>

    <h1>@ViewBag.track.Name</h1>
    <h1>@ViewBag.track.Artists</h1>
    @* @foreach (var item in ViewBag.allSongs)
    {
        <h1>@item.SongName</h1>
        <iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/@item.Id?utm_source=generator" width="100%" height="80" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>
    } *@
</body>
</html>